DECLARE @equity table 
(ell varchar(40),
 count INT,
 percentag DECIMAL(10,4)
 );
insert into 
@equity
select distinct
	b.ell,
 COUNT(DISTINCT r.studentID) AS 'count',
(COUNT(DISTINCT r.studentID) * 1.0) / (SELECT COUNT(DISTINCT r3.studentID) FROM ala_roster r3
                                            JOIN school s3 ON s3.[school-id] = r3.entityID
                                            JOIN ala_allStudents b3 ON b3.studentID = r3.studentID
                                            WHERE r3.courseType = 'AP' OR r3.courseType = 'AIC' OR r3.courseName LIKE '%AICE%' OR r3.courseType = 'IB' OR r3.courseName LIKE 'IB%' OR r3.courseName LIKE 'FL PRE-IB%') AS 'percentag'

from
  ala_roster r
  join school        s on s.[school-id] = r.entityID
  join ala_allStudents b on b.studentID = r.studentID
where
r.courseType = 'AP' or courseType = 'AIC' or courseName like '%AICE%' or courseType = 'IB' or courseName like 'IB%' or courseName like 'FL PRE-IB%'
group by
b.ell

select *
 from @equity;

--Shows count of students in ABIBAICE with ELL code
